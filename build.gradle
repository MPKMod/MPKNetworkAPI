configure(
        subprojects.findAll {
            it.parent == rootProject
        }
) {
    configurations {
        library
        implementation.extendsFrom library
    }

    project.afterEvaluate {
        jar {
            destinationDirectory = file "${rootProject.buildDir}/libs"
            archivesBaseName = "mpknetapi-" + project.archivesBaseName
            from {
                configurations.library.collect { it.isDirectory() ? it : zipTree(it) }
            }
        }
    }
}